{"openapi":"3.0.0","info":{"version":"2.0.4","title":"Todo List API","description":"API REST completa con autenticaciÃ³n JWT, gestiÃ³n de todos con MongoDB e imÃ¡genes con Cloudflare R2"},"servers":[{"url":"http://localhost:8787","description":"Servidor de desarrollo"},{"url":"https://todo-list.dobleb.cl","description":"Servidor de producciÃ³n"}],"tags":[{"name":"Health","description":"Health check endpoints"},{"name":"Auth","description":"AutenticaciÃ³n y gestiÃ³n de usuarios"},{"name":"Todos","description":"CRUD de tareas"},{"name":"Images","description":"GestiÃ³n de imÃ¡genes con R2"}],"components":{"schemas":{},"parameters":{},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Token JWT obtenido del endpoint /auth/login"}}},"paths":{"/auth/register":{"post":{"tags":["Auth"],"summary":"Registrar usuario","description":"Crea una nueva cuenta de usuario","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","minLength":6,"example":"password123"}},"required":["email","password"]}}}},"responses":{"201":{"description":"Usuario registrado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"token":{"type":"string"},"userId":{"type":"string"}},"required":["token","userId"]}},"required":["success","data"]}}}},"400":{"description":"Datos invÃ¡lidos o usuario ya existe","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Iniciar sesiÃ³n","description":"Autentica un usuario y devuelve un token JWT","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","minLength":6,"example":"password123"}},"required":["email","password"]}}}},"responses":{"200":{"description":"Login exitoso","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"token":{"type":"string"},"userId":{"type":"string"}},"required":["token","userId"]}},"required":["success","data"]}}}},"401":{"description":"Credenciales invÃ¡lidas","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/todos":{"get":{"tags":["Todos"],"summary":"Listar todos los todos","description":"Obtiene la lista de todos del usuario autenticado","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Lista de todos","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"completed":{"type":"boolean"},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","userId","title","completed","createdAt","updatedAt"]}},"count":{"type":"number"}},"required":["success","data","count"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}},"post":{"tags":["Todos"],"summary":"Crear un nuevo todo","description":"Crea un nuevo todo para el usuario autenticado","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","minLength":1,"example":"Buy groceries"},"completed":{"type":"boolean","default":false,"example":false},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri","example":"https://example.com/photo.jpg"}},"required":["title"]}}}},"responses":{"201":{"description":"Todo creado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"completed":{"type":"boolean"},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","userId","title","completed","createdAt","updatedAt"]}},"required":["success","data"]}}}},"400":{"description":"Datos invÃ¡lidos","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/todos/{id}":{"get":{"tags":["Todos"],"summary":"Obtener un todo","description":"Obtiene un todo especÃ­fico por su ID","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","example":"abc123"},"required":true,"name":"id","in":"path"}],"responses":{"200":{"description":"Todo encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"completed":{"type":"boolean"},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","userId","title","completed","createdAt","updatedAt"]}},"required":["success","data"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Todo no encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}},"put":{"tags":["Todos"],"summary":"Actualizar todo (completo)","description":"Actualiza todos los campos de un todo","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","example":"abc123"},"required":true,"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","minLength":1,"example":"Buy groceries"},"completed":{"type":"boolean","default":false,"example":true},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri","example":"https://example.com/photo.jpg"}},"required":["title"]}}}},"responses":{"200":{"description":"Todo actualizado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"completed":{"type":"boolean"},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","userId","title","completed","createdAt","updatedAt"]}},"required":["success","data"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Todo no encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}},"patch":{"tags":["Todos"],"summary":"Actualizar todo (parcial)","description":"Actualiza solo los campos enviados de un todo","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","example":"abc123"},"required":true,"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string","minLength":1,"example":"Buy groceries"},"completed":{"type":"boolean","example":true},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri","example":"https://example.com/photo.jpg"}}}}}},"responses":{"200":{"description":"Todo actualizado parcialmente","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"completed":{"type":"boolean"},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","userId","title","completed","createdAt","updatedAt"]}},"required":["success","data"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Todo no encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}},"delete":{"tags":["Todos"],"summary":"Eliminar todo","description":"Elimina un todo y su imagen asociada si existe","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","example":"abc123"},"required":true,"name":"id","in":"path"}],"responses":{"200":{"description":"Todo eliminado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"completed":{"type":"boolean"},"location":{"type":"object","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90},"longitude":{"type":"number","minimum":-180,"maximum":180}},"required":["latitude","longitude"]},"photoUri":{"type":"string","format":"uri"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","userId","title","completed","createdAt","updatedAt"]},"message":{"type":"string"}},"required":["success","data","message"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Todo no encontrado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/images/{userId}/{imageId}":{"get":{"tags":["Images"],"summary":"Descargar imagen","description":"Descarga una imagen desde Cloudflare R2 (acceso pÃºblico)","security":[],"parameters":[{"schema":{"type":"string","example":"user123"},"required":true,"name":"userId","in":"path"},{"schema":{"type":"string","example":"abc123.jpg"},"required":true,"name":"imageId","in":"path"}],"responses":{"200":{"description":"Imagen encontrada","content":{"image/*":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"Imagen no encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Error del servidor","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}},"delete":{"tags":["Images"],"summary":"Eliminar imagen","description":"Elimina una imagen desde Cloudflare R2 (solo el propietario)","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","example":"user123"},"required":true,"name":"userId","in":"path"},{"schema":{"type":"string","example":"abc123.jpg"},"required":true,"name":"imageId","in":"path"}],"responses":{"200":{"description":"Imagen eliminada","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]}},"required":["success","data"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"403":{"description":"Sin permisos para eliminar","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"404":{"description":"Imagen no encontrada","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Error del servidor","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}},"/images":{"post":{"tags":["Images"],"summary":"Subir imagen","description":"Sube una imagen a Cloudflare R2 (mÃ¡x. 5MB, formatos: JPEG, PNG, WebP, GIF)","security":[{"bearerAuth":[]}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"image":{"type":"string","format":"binary","description":"Archivo de imagen (JPEG, PNG, WebP o GIF, mÃ¡x. 5MB)"}}}}}},"responses":{"201":{"description":"Imagen subida exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[true]},"data":{"type":"object","properties":{"url":{"type":"string"},"key":{"type":"string"},"size":{"type":"number"},"contentType":{"type":"string"}},"required":["url","key","size","contentType"]}},"required":["success","data"]}}}},"400":{"description":"Archivo invÃ¡lido o muy grande","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"401":{"description":"No autenticado","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}},"500":{"description":"Error del servidor","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string"}},"required":["success","error"]}}}}}}}}}
